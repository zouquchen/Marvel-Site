---
title: MySQL执行计划
date: 2022-08-19 16:53:32
permalink: /pages/03a328/
categories:
  - 计算机基础
  - MySQL
tags:
  - 
author: 
  name: Marvel
  link: https://github.com/zouquchen
---
# MySQL 执行计划

使用 EXPLAIN 命令来查看某查询语句的执行计划，如：

```sql
EXPLAIN select name from Student where id = 2;
```

可以查看到执行结果：

| id   | select_type | table   | partitions | type  | possible_keys | key     | key_len | ref   | rows | filtered | Extra  |
| ---- | ----------- | ------- | ---------- | ----- | ------------- | ------- | ------- | ----- | ---- | -------- | ------ |
| 1    | SIMPLE      | lecture | (NULL)     | const | PRIMARY       | PRIMARY | 8       | const | 1    | 100.00   | (NULL) |

下面解释一下这些参数的含义：

- id：查询序列号，几个查询语句就有几行。id 越前优先级越高，越先执行
- select_type：查询中每个 SELECT 子句的类型
  - SIMPLE：简单 SELECT 查询，未使用 UNION 和子查询
  - PRIMARY：查询包含任何复杂的子部分则被标记为 PRIMARY，PRIMARY 为最外层查询，最后执行
  - SUBQUERY：在 SELECT 或 WHERE 中包含的子查询
  - UNION：第 2 个 SELECT 在 UNION 只会，则被标记为 UNION
  - DEPENDENT UNION：含有 UNION 查询的第二个或最后一个表，依赖外部的查询
- table：此处查询访问的表
- partitions：该参数用于记录使用的分区信息，NULL 表示该表是不是分区表
- type：优化 sql 的重要字段，是判断 sql 性能和优化程度重要指标
  - 执行效率 system > const > eq_ref > ref > range > index > ALL
- possible keys：可能会走的索引
- key：真正走的索引
- key_len：索引长度，可能用于联合索引走了几个索引的判断
- ref：命中索引的字段名，等值查询会是 const
- rows：读取的数据量，越少越优
- filterd：是百分比参数，是指 row 的命中率，越高越好
- extra：其他信息，比如是否排序，是否覆盖索引等待



